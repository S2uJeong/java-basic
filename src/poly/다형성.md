# Polymorphism
  - 한 객체가 여러 타입의 객체로 취급될 수 있는 능력 
  - 2가지 핵심이론
    - 다형적 참조 : 하나의 변수 타입으로 다양한 자식 인스턴스를 참조할 수 있는 기능
    - 메서드 오버라이딩 : 기존 기능을 하위 타입에서 새로운 기능으로 재정의, 다형적 참조(자식 객체를 담은 부모타입변수)가 자식의 메서드를 실행 할 수 있게 한다. 
    
## 1. 다형적 참조
- 다양한 형태를 참조할 수 있다고 하여 다형적 참조
- 부모 타입은 자신은 물론이고, **자신을 기준으로 모든 자식 타입을 참조할 수 있다.**
  - 부모 변수가 부모 인스턴스 참조
    - 메모리상에 부모 인스턴스만 생성된다. 
  - 자식 변수가 자식 인스턴스 참조
    - 메모리상에 부모/자식 인스턴스 모두 생성 
  - 부모 변수가 자식 인스턴스 참조 (다형적 참조)
    - 메모리상에 부모/자식 인스턴스 모두 생성, 자식 메서드 실행 불가 
    - 실행할 기능이 없을 때, 부모쪽으로 올라갈 순 있어도 자식쪽으로 내려가서 찾을 순 없다!
- 런타임 에러 유발한는 다운캐스팅보단 업캐스팅을 사용하자! 
  - 자식타입 객체 생성 후 상위 타입으로 업캐스팅해서 사용! 
  
### 다운캐스팅 
- 부모타입을 자식타입으로 
- 캐스팅을 한다고 해서 타입이 변하는 것은 아니고, 
  1. 해당 참조 값을 꺼내고
  2. 꺼낸 참조값을 자식 타입으로 변환되는것
  3. 따라서 부모타입이였던 변수의 타입이 변하진 않는다.
```java
Parent poly = new Child();
// poly.childMethod(); // 불가 

        Child child1 = (Child) poly;
child1.childMethod();
// poly 타입은 그대로 Parent다.
```
- 일시적 다운캐스팅
  - 자식 타입의 기능을 사용하기 위해 다운캐스팅 결과를 변수에 담아두었다가 사용하는게 번거롭다.
  - 이런 과정 없이 일시적으로 다운캐스팅을 해서 인스턴스에 있는 하위 클래스의 기능을 바로 호출할 수 있다.
  ```java
  ((Child) poly).childMethod();
  ```
### 업캐스팅 
- 업캐스팅은 생략 가능 
- 애초에 부모는 자식을 품을 수 있으니까!

### 다운캐스팅과 주의점 
- 잘못하면 심각한 런타임 오류가 발생한다.
  - 상위타입 객체를 생성 후, 다운캐스팅하면 힙메모리에 하위타입의 인스턴스가 생성되지 않았으므로 에러 발생
  - 코드 : CastingMain2
- 따라서, 해당 문제가 터질일 없는 업캐스팅을 사용하자! 

### 타입 확인 명령 instanceOf
- 다운캐스팅을 하고 싶을 시, 해당 함수로 확인하고서 적용시킬 수 있다. 


## 2. 메서드 오버라이딩
- 멤버 변수는 오버라이딩 되지 않고 메서드는 오버라이딩 된다. 
- 오버라이딩 된 메서드가 항상 우선권을 가진다. 

## 추상 클래스/메서드
- 다형성을 이용하여 코드를 업데이트 했을 때도 (/ex1, /ex2) 아래의 두 가지 문제가 해결되지 않는다.
  - Animal 클래스를 생성할 수 있음
  - Animal 클래스를 상속 받는 곳에서 sound() 메서드 오버라이딩을 하지 않을 가능성 
- 위의 문제를 해결 하기 위해 클래스 및 메서드에 제약을 주는 추상 클래스/메서드를 이용한다.
- 자바는 순수 추상 클래스를 더 편리하게 사용할 수 있도록 인터페이스라는 개념을 제공한다.  (순수 추상 클래스 == 인터페이스)

### 추상 클래스
- 동물(Animal)과 같이 부모 클래스는 제공하지만, 실제 생성되면 안되는 클래스를 지칭
- 추상적인 개념을 제공하는 클래스이다
- 실체인 인스턴스가 존재하지 않고 상속을 목적으로 사용된다. 
- 기존 클래스와 완전히 같지만 인스턴스를 생성하지 못하는 제약을 추가한 것
```java
abstract class Animal {}
```

### 추상 메서드 
- 상속 받는 자식 클래스가 반드시 오버라이딩 해야 하는 메서드를 부모 클래스에 정의해 두는 것
- 메서드 바디가 없다.
  - 바디 만들면 컴파일 오류임.
- 추상 메서드가 하나라도 있는 클래스는 추상 클래스로 선언해야 한다.
  - 컴파일 오류임
- 오버라이딩 하지 않으려면 자식도 추상 클래스가 되어야 한다. 
- 추상 메서드는 기존 메서드와 완전 같지만 메서드 바디가 없고, 자식 클래스가 해당 메서드를 반드시 오버라이딩 해야 한다는 제약이 추가된 것